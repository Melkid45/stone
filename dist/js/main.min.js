let scrollTrigger;const lenis=new Lenis({autoRaf:!0,lerp:.1});let resizeTimeout,isDesktop=$(window).width()>780,heightFooter=document.querySelector(".footer").clientHeight;function updateMarqueeAnimation(){const e=document.getElementById("marqueeContainer"),t=document.querySelectorAll(".showreel-partners-stroke");if(!e||0===t.length)return;const o=t[0].scrollWidth,r=e.parentElement.offsetWidth,i=-(o+(parseFloat(getComputedStyle(e).gap)||0))/r*100;let n=document.getElementById("dynamic-marquee");n||(n=document.createElement("style"),n.id="dynamic-marquuee",document.head.appendChild(n)),n.innerHTML=`\n        @keyframes animPartners {\n            0% { \n                transform: translateX(0);\n                opacity: 1;\n            }\n            95% {\n                opacity: 1;\n            }\n            100% { \n                transform: translateX(${i}%);\n                opacity: 1;\n            }\n        }\n        \n        .stroke {\n            animation-fill-mode: both;\n        }\n    `,e.style.animation="none",setTimeout((()=>{e.style.animation=""}),10)}function debouncedUpdate(){clearTimeout(resizeTimeout),resizeTimeout=setTimeout(updateMarqueeAnimation,250)}if($("body").css({"padding-bottom":heightFooter}),lenis.raf(0),$(".works__body-information-choose button").on("click",(function(){let e=$(this).index();$(this).addClass("current"),$(".works__body-information-choose button").not(this).removeClass("current"),$(".works-frame-sction").each((function(t){$(this).index()==e?$(this).addClass("current"):$(this).removeClass("current")})),scrollTrigger.update()})),document.getElementById("marqueeContainer")?.addEventListener("animationiteration",(function(){this.style.opacity="1"})),document.addEventListener("DOMContentLoaded",(function(){setTimeout(updateMarqueeAnimation,1e3),updateMarqueeAnimation()})),window.addEventListener("resize",debouncedUpdate),isDesktop&&(gsap.set(".showreel__body-video",{yPercent:-50,scale:.5}),gsap.to(".showreel__body-video",{yPercent:0,scale:1,ease:"power1",scrollTrigger:{trigger:".showreel",scrub:!0,start:"top bottom",end:"bottom bottom"}})),document.querySelector(".celebrities")){let e=document.querySelectorAll(".frame-celebritie"),t=document.querySelector(".celebrities__body-frame");document.querySelector(".celebrities__body");const o=parseFloat(getComputedStyle(t).gap)||0;let r=isDesktop?100:24,i=e.length*e[0].clientWidth+(e.length-1)*o+r-t.clientWidth;gsap.to(t,{x:-i,ease:"power1",scrollTrigger:{trigger:".celebrities",scrub:!0,start:"top top",end:`+=${60*e.length}%`,pin:!0}})}$(".header-menu-open").on("click",(function(e){$(".header__menu").addClass("opened")})),$(".navigation-close").on("click",(function(e){$(".header__menu").removeClass("opened")}));let lastScrollTop=0,isScrollingDown=!1;const scrollThreshold=5,activationThreshold=50;if(lenis.on("scroll",(({scroll:e})=>{ScrollTrigger.update(),currentScroll=e;const t=document.querySelector(".header");Math.abs(currentScroll-lastScrollTop)>5&&(isScrollingDown=currentScroll>lastScrollTop,lastScrollTop=currentScroll),isScrollingDown&&currentScroll>50?t.classList.add("back"):t.classList.remove("back")})),document.querySelector(".team-splide")){var splide=new Splide(".team-splide",{type:"loop",perPage:4,perMove:1,pagination:!1});splide.mount()}let AnimItems=document.querySelectorAll(".transform-item");gsap.set(document.querySelectorAll(".transform-item img"),{yPercent:-10}),gsap.utils.toArray(AnimItems).forEach(((e,t)=>{let o=e.querySelector("img");o&&gsap.to(o,{yPercent:10,duration:1,ease:"expo.InOut",scrollTrigger:{trigger:e,start:"top bottom",end:"+=200%",scrub:!0}})}));const itemTweens={};$(".project-filter-main button").on("click",(function(e){let t=$(this).index();$(this).addClass("current").siblings().removeClass("current"),$(".project-filter-soft .item").each((function(e){const o=$(this),r=o.index(),i=o.find("button");itemTweens[r]&&itemTweens[r].kill(),r===t?(o.addClass("current"),itemTweens[r]=gsap.to(i,{opacity:.6,duration:.6,stagger:.2,ease:"sine.out",overwrite:"auto",onComplete:function(){i.first().addClass("current")}}),scrollTrigger.update()):(o.removeClass("current"),i.removeClass("current"),gsap.set(i,{opacity:0}))}))})),$(".project-filter-soft button").on("click",(function(e){$(this).toggleClass("current")}));let ButtonsItem=document.querySelectorAll(".project-filter-soft .item");gsap.utils.toArray(ButtonsItem).forEach(((e,t)=>{let o=e.querySelectorAll("button");0!=t&&gsap.set(o,{opacity:0})})),$(".list-item").on("click",(function(e){$(this).hasClass("current")?($(this).next(".list-item").addClass("current"),$(this).removeClass("current"),0==$(this).next(".list-item").length&&($(this).removeClass("current"),$(".list-item").first().addClass("current"))):($(this).addClass("current"),$(".list-item").not(this).removeClass("current"))})),$(window).on("load",(function(e){lenis.scrollTo(0),lenis.emit(),lenis.resize(),lenis.raf(0)}));let orderWindow=document.querySelector(".order");$(".order-open").on("click",(function(e){$(".order").fadeIn(300)})),$(".close-order").on("click",(function(e){$(".order").fadeOut(300)})),document.addEventListener("DOMContentLoaded",(function(){const e="ontouchstart"in window||navigator.maxTouchPoints>0,t=document.querySelectorAll(".work, .services-frame-item, .project-wrap .item, .our-services-frame .item");if(t.forEach((t=>{const o=t.querySelectorAll(".preview-video, .services-video");if(!o.length)return;let r=o[0];o.forEach(((e,t)=>{0===t?e.classList.add("show-video"):e.classList.remove("show-video"),e.pause(),e.currentTime=0}));e||(t.addEventListener("mouseenter",(()=>{(e=>{r&&r!==e&&(r.pause(),r.currentTime=0,r.classList.remove("show-video"));const o=e.querySelector("source");o&&!e.src&&o.dataset.src&&(o.src=o.dataset.src,e.load()),e.muted=!0,e.currentTime=0,e.play().catch((()=>{})),e.classList.add("show-video"),t.setAttribute("data-video-playing","true"),r=e})(t.querySelector(".preview-video.show-video, .services-video.show-video")||o[0])})),t.addEventListener("mouseleave",(()=>{var e;r&&((e=r).pause(),e.currentTime=0,e.classList.remove("show-video"),t.setAttribute("data-video-playing","false"))})))})),e){const e=new IntersectionObserver((e=>{e.forEach((e=>{const t=e.target,o=t.querySelector(".preview-video.show-video, .services-video.show-video");if(o)if(e.isIntersecting){const e=o.querySelector("source");e&&!o.src&&e.dataset.src&&(e.src=e.dataset.src,o.load()),o.muted=!0,o.currentTime=0,o.play().catch((()=>{})),t.setAttribute("data-video-playing","true")}else o.pause(),o.currentTime=0,t.setAttribute("data-video-playing","false")}))}),{threshold:.5});t.forEach((t=>e.observe(t)))}$(".information-tags-tag").on("click",(function(){const e=$(this).index();$(this).addClass("current").siblings().removeClass("current");$(this).closest(".services-frame-item").find(".wrap-services-video video").each((function(t){const o=this,r=$(o).find("source");t===e?($(o).addClass("show-video"),!o.src&&r.data("src")&&(r.attr("src",r.data("src")),o.load()),o.muted=!0,o.currentTime=0,o.play().catch((()=>{}))):(o.pause(),o.currentTime=0,$(o).removeClass("show-video"))}))}))}));let isPriorityVideoLoaded=!1;if(document.querySelector(".preloader")){function isMobileDevice(){return/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)}function tryStartAnimation(){isPriorityVideoLoaded&&runPreloaderAnimation()}function checkPreloaderLoad(){const e=document.querySelector(".showreel__body-video");document.querySelector(".about-parallax video");let t=!1;if(setTimeout((()=>{t=!0,isPriorityVideoLoaded||(console.warn("Assets loading timeout, starting animation anyway"),t&&(isPriorityVideoLoaded=!0,tryStartAnimation()))}),5e3),e)if(4===e.readyState)isPriorityVideoLoaded=!0,tryStartAnimation();else{try{e.load()}catch(e){}const t=()=>{isPriorityVideoLoaded=!0,tryStartAnimation(),e.removeEventListener("loadeddata",t),e.removeEventListener("error",t)};e.addEventListener("loadeddata",t),e.addEventListener("error",t),isMobileDevice()&&0===e.readyState&&setTimeout((()=>{isPriorityVideoLoaded||(console.warn("Priority video not loading on mobile, continuing"),isPriorityVideoLoaded=!0,tryStartAnimation())}),2e3)}else isPriorityVideoLoaded=!0,tryStartAnimation()}let n=isDesktop?600:300;function runPreloaderAnimation(){const e=gsap.timeline({defaults:{ease:"power2.inOut"}});e.to(".first-words span",{opacity:0,stagger:.15,y:-40,duration:.3,width:"0px",onComplete:()=>{}}),e.to(".text-h",{rotateZ:360,duration:1,yoyo:!0,transformOrigin:"50% 50%"},"-=0.4"),e.from(".second-words span",{opacity:0,y:40,stagger:.15,duration:.3,onStart:()=>{$(".second-words").animate({width:`${n}rem`},500)}},"-=0.2"),e.to(".preloader",{opacity:0,duration:.8,delay:.5,onComplete:()=>document.querySelector(".preloader").style.display="none"})}checkPreloaderLoad()}